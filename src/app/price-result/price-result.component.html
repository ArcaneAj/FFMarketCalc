<div class="grid" (click)="openModal()" (contextmenu)="onRightClick($event)">
    <div class="title double-wide">
        {{name()}}
    </div>
    
    @if (marketPriceDc() > 0) {
        <div class="dc-price double-wide">
            {{result().dc}} Price: {{marketPriceDc()}}
        </div>
        <div class="world-price double-wide">
            {{result().world}} Price: {{marketPriceWorld()}}
        </div>
        
        @if (sortCrafted()) {
            @if (cheapestCraftPrice() < 999999) {
                <div class="cost">
                    Crafted Cost: {{cheapestCraftPrice()}}
                </div>
                <div class="profit">
                    Craft profit: {{craftProfit()}}
                </div>
            } @else {
                <div class="invalid">
                    Item not craftable
                </div>
            }
        }
        @if (!sortCrafted()) {
            @if ((shopPrice() ?? 1000000) < 999999) {
                <div class="cost">
                    Shop Cost: {{shopPrice()}}
                </div>
                <div class="profit">
                    Shop profit: {{shopProfit()}}
                </div>
            } @else {
                <div class="invalid">
                    Item not purchasable
                </div>
            }
        }
    } @else if (marketPriceDc() < 0) {
        <span class="none-sold">None sold in last week</span>
    } @else {
        <span class="loader"></span>
    }
</div>

<dialog #dialog class="modal">
    <app-price-result-tree [result]="result()" [depth]="0"></app-price-result-tree>
    <button mat-flat-button color="primary" class="close-button" (click)="closeModal()">Close</button>
</dialog>