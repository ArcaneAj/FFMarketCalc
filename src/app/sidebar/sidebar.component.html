<div class="content hidden-mobile">
    <mat-form-field class="search-form-field" appearance="outline">
        <mat-label>Item Search</mat-label>
        <input matInput
            type="text" 
            (keydown.enter)="selectFirst()"
            (keydown.escape)="deselectLast()"
            [(ngModel)]="searchFilter">
        @if (searchFilter) {
            <button matSuffix mat-icon-button aria-label="Clear" (click)="searchFilter=''">
                <mat-icon>close</mat-icon>
            </button>
        }
    </mat-form-field>
    <div class="buttons">
        <button mat-flat-button color="warn" class="half-button reset-button" (mousedown)="clearSelection()">Reset</button>
        <button mat-flat-button color="primary" class="half-button calculate-button" (mousedown)="calculate()">Calculate</button>
    </div>
    @if (items && items.length > 0) {
        <div class="item-select">
            <div class="feature-toggles">
                <div class="only-crafted">
                    <mat-checkbox [(ngModel)]="onlyCrafted">
                        Only Crafted
                    </mat-checkbox>
                </div>
                <div class="craft-level">
                    iLevel:
                    <mat-form-field class="craft-level-input" appearance="outline">
                        <input matInput
                            type="number" 
                            [(ngModel)]="minLevel">
                    </mat-form-field>
                    <mat-form-field class="craft-level-input" appearance="outline">
                        <input matInput
                            type="number" 
                            [(ngModel)]="maxLevel">
                    </mat-form-field>
                </div>
            </div>
            <mat-list>
                <cdk-virtual-scroll-viewport [itemSize]="50" class="virtual-viewport">
                    <mat-list-item
                        *cdkVirtualFor="let item of (items | filter: searchFilter:onlyCrafted:minLevel:maxLevel | order: changeFlag)"
                        (mousedown)="onSelect(item)"
                        [ngClass]="{'item-selected': item.selected}">
                        {{item.Name}}
                    </mat-list-item>
                </cdk-virtual-scroll-viewport>
            </mat-list>
        </div>
    } @else {
        <div class="loader-wrapper">
            <span class="loader"></span>
            Loading items...
        </div>
    }
</div>