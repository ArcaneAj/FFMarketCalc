<div class="content hidden-mobile">
    <app-input
        class="search-form-field"
        [height]="56"
        (keydownEnter)="selectFirst()"
        (keydownEscape)="deselectLast()"
        [(content)]="searchFilter"
    ></app-input>
    <div class="buttons">
        <button
            mat-flat-button
            color="warn"
            class="half-button reset-button"
            (mousedown)="clearSelection()"
        >
            Reset
        </button>
        <button
            mat-flat-button
            color="primary"
            class="half-button calculate-button"
            (mousedown)="calculate()"
        >
            Calculate
        </button>
    </div>
    @if (items && items.length > 0) {
        <div class="item-select">
            <div class="feature-toggles">
                <div class="only-crafted">
                    <mat-checkbox [(ngModel)]="onlyCrafted">
                        Only Crafted
                    </mat-checkbox>
                </div>
                <div class="craft-level">
                    iLevel:
                    <mat-form-field
                        class="craft-level-input"
                        appearance="outline"
                    >
                        <input matInput type="number" [(ngModel)]="minLevel" />
                    </mat-form-field>
                    <mat-form-field
                        class="craft-level-input"
                        appearance="outline"
                    >
                        <input matInput type="number" [(ngModel)]="maxLevel" />
                    </mat-form-field>
                </div>
            </div>
            <mat-list>
                <cdk-virtual-scroll-viewport
                    [itemSize]="50"
                    class="virtual-viewport"
                >
                    <mat-list-item
                        *cdkVirtualFor="
                            let item of items
                                | filter
                                    : searchFilter
                                    : onlyCrafted
                                    : minLevel
                                    : maxLevel
                                | order: changeFlag
                        "
                        (mousedown)="onSelect(item)"
                        [ngClass]="{ 'item-selected': item.selected }"
                    >
                        {{ item.Name }}
                    </mat-list-item>
                </cdk-virtual-scroll-viewport>
            </mat-list>
        </div>
        <p-toast
            position="bottom-left"
            [showTransformOptions]="'translateY(0%)'"
            [showTransitionOptions]="'100ms'"
            [hideTransitionOptions]="'0ms'"
            [hideTransformOptions]="'translateY(0%)'"
            [breakpoints]="{
                '700px': {
                    width: 'calc(100% - 48px)',
                    right: '24px',
                    left: '24px',
                    bottom: '24px',
                },
            }"
        >
            <ng-template let-message pTemplate="headless">
                <section class="toast-container">
                    <div class="toast-content">
                        {{ message.summary }}
                    </div>
                </section>
            </ng-template>
        </p-toast>
    } @else {
        <div class="loader-wrapper">
            <span class="loader"></span>
            Loading items...
        </div>
    }
</div>
